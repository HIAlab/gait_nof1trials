---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
library(dplyr)
library(ggplot2)
library(RColorBrewer)

gait_parameter <- "stride_lengths"
experiment <- "cauchy_conjugate_left_foot_downsample_5"

file_names <- c(
  paste0("all_estimates_", gait_parameter, "_default.csv"),
  paste0("all_estimates_", gait_parameter, "_default_informed.csv"),
  paste0("all_estimates_", gait_parameter, "_default_time_cov.csv"),
  paste0("all_estimates_", gait_parameter, "_default_time_cov_informed.csv"),
  paste0("all_estimates_", gait_parameter, "_AR1.csv")
)
model_names <- c(
  "Default",
  "Default (Informed)", 
  "Time Covariate",
  "Time Covariate (Informed)",
  "AR1"
)

df_list <- list()
for (i in 1:length(file_names)) {
  folder_path <- file.path("..", "data", "processed", experiment)
  data_path <- file.path(folder_path, file_names[i])
  est_df <- readr::read_csv(data_path, col_names = T, show_col_types = FALSE)
  est_df$model <- model_names[i]
  
  df_list[[i]] <- est_df 
}
all_est_df <- bind_rows(df_list)

p <- ggplot(
  data = all_est_df, 
  aes(x=parameter, y=mean)) + 
  geom_boxplot(aes(fill=as.factor(model))) + 
  geom_point(aes(y=mean, group=model), position = position_dodge(width=0.75)) + 
  guides(fill=guide_legend(title="Likelihood Model")) + 
  ggtitle(paste0(gait_parameter, " posterior from all 16 subjects"))
p + facet_wrap( ~ parameter, scales="free")

p <- ggplot(
  data = all_est_df, 
  aes(x=parameter, y=sd)) + 
  geom_boxplot(aes(fill=as.factor(model))) + 
  geom_point(aes(y=sd, group=model), position = position_dodge(width=0.75)) + 
  guides(fill=guide_legend(title="Likelihood Model")) + 
  ggtitle(paste0(gait_parameter, " posterior from all 16 subjects"))
p + facet_wrap( ~ parameter, scales="free")
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

